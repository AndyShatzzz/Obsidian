

Часто над проектом трудится целая команда разработчиков. Представьте, что вы работаете в подобной веб-студии, как вдруг вам пишут в рабочий чат:

Проджект

ААА АЛАРМ

Игорян вчера шапку допилил, а я сейчас смотрю — текст ссылок не тот

Пишу ему, а он на страт-сессии и не отвечает

Андрей

Я сейчас работаю над подвалом. Это горит?

Проджект

Очень горит(( поправь асап плиз

А то у нас сайтом пользоваться нельзя. На ссылках одно написано, а ведут они не туда

Андрей

Окей, поправлю ща

Проджект

Спасибо! Возьми правильные ссылки у дизайнера

Делать нечего — придётся отвлекаться от своей задачи и доделывать меню за Игорем. Вы переключились в ветку `bugfix/header`, исправили баг и внесли изменения. Теперь вы их коммитите и переходите в ветку `main`:

Скопировать кодBASH

```
git commit -m "Change z-index, fix navigation links in header" && git checkout main 
```

В ветке `main` вы пытаетесь смержить её с `bugfix/header`, но вместо коммита слияния видите:

Скопировать кодBASH

```
git merge bugfix/header
Auto-merging pages/index.css # Файл, в котором «Гит» самостоятельно внёс изменения 
CONFLICT (content): Merge conflict in index.html # Файл, в котором возник конфликт
Automatic merge failed; fix conflicts and then commit the result 
```

«Что за..?» — думаете вы. Смотрите историю коммитов и видите: пока вы работали с `bugfix/header`, Игорь во время перекура на стратсессии создал ветку `change-link/navigation`, поработал в ней и смержил с `main`. Часть изменений касалась одних и тех же строк кода: вы оба меняли ссылки в шапке — поэтому всё сломалось.

Вот как выглядит `index.html` в ветке `main` после слияния с `change-link/navigation`:

Скопировать кодHTML

```
<!--Изменения из ветки change-link/navigation -->
<nav class="navigation">
  <ul class="navigation__list">
    <li class="navigation__item">
            <a href="/" class="navigation__link">Главная</a>
        </li>
    <li class="navigation__item">
            <a href="/catalog" class="navigation__link">Каталог</a>
        </li>
    <li class="navigation__item">
            <a href="/about" class="navigation__link">О проекте</a>
        </li>
    <li class="navigation__item">
            <a href="/join" class="navigation__link">Вакансии</a>
        </li>
  </ul>
</nav> 
```

А так он выглядел, когда вы работали в ветке `bugfix/header`:

Скопировать кодHTML

```
<nav class="navigation">
  <ul class="navigation__list">
    <li class="navigation__item">
            <a href="/" class="navigation__link">Главная</a>
        </li>
    <li class="navigation__item">
            <a href="/contacts" class="navigation__link">Контакты</a>
        </li>
    <li class="navigation__item">
            <a href="/about" class="navigation__link">О проекте</a>
        </li>
    <li class="navigation__item">
            <a href="/join" class="navigation__link">Вакансии</a>
        </li>
  </ul>
</nav> 
```

![image](https://pictures.s3.yandex.net/resources/Untitled_1603112784.png)

_В оранжевых точках произошёл конфликт версий_

Возник конфликт кода. «Гит» сам интегрирует большинство изменений при слиянии, но не всегда может это сделать. Если изменения в одной и той же строке кода, конфликт решает разработчик.

Сначала выясняем, где возник конфликт и как он выглядит. Во время мержа «Гит» сам подсвечивает файлы, которые не смог объединить.

Вот что произошло в `index.html`:

Скопировать кодHTML

```
<!-- Не интересующие нас блоки кода -->

<<<<<<< HEAD <!-- Текущая ветка, в нашем случае - main -->
        <a href="/catalog" class="navigation__link">Каталог</a>
======= <!-- Окончание изменений текущей ветки, начало конфликтующей -->
        <a href="/contacts" class="navigation__link">Контакты</a>
>>>>>>> bugfix/header 
<!-- Окончание части ветки bugfix/header, с которой мы проводили слияние -->

<!-- Другие не интересующие нас блоки кода --> 
```

Конфликт состоит из «двух частей» — текущей и той, с которой мы производили слияние.

Другие способы посмотреть файлы с конфликтами:

-   Команда `git status` покажет untracked-файлы в этой рабочей области, флаг `-sb` — краткую версию информации:

Скопировать кодBASH

```
git status -sb

## main
UU index.html 
```

-   Команда `git diff` покажет изменения во всех файлах:

Скопировать кодBASH

```
git diff

diff --cc index.html
++<<<<<<< HEAD
+            <a href="/catalog" class="navigation__link">Каталог</a>
++=======
+            <a href="/contacts" class="navigation__link">Контакты</a>
++>>>>>>> bugfix/header 
```

Переходим к решению конфликтов. Самый простой способ — вручную удалить неактуальную часть кода:

Скопировать кодHTML

```
<<<<<<< HEAD
=======
        <a href="/contacts" class="navigation__link">Контакты</a>
>>>>>>> bugfix/header 
```

Затем добавляем изменённые файлы в `staged` и делаем коммит:

Скопировать кодBASH

```
git add -A && git commit -m "Resolved conflict in main" 
```

Конфликты в «Гите» неизбежны для команды разработчиков. Когда много участков кода, веток и параллельной работы, ошибки слияния закономерны. Конфликт — ожидаемый процесс, а не страшный зверь, стремящийся сломать проект.

И всё же старайтесь их избегать. В нашем примере изменилась только одна строка кода — в реальном проекте конфликты в десятках и сотнях файлов. Страшно представить, сколько времени уходит на их решение.